use myDB;
create table region (R_REGIONKEY INT(4), R_NAME VARCHAR(25), R_COMMENT VARCHAR(152));

create table nation (N_NATIONKEY INT(4), N_NAME VARCHAR(25), N_REGIONKEY INT(4), N_COMMENT VARCHAR(152));

create table part (P_PARTKEY		INT(4),
		P_NAME			VARCHAR(55),
		P_MFGR			VARCHAR(25),
		P_BRAND			VARCHAR(10),
		P_TYPE			VARCHAR(25),
		P_SIZE			INT(4),
		P_CONTAINER		VARCHAR(10),
		P_RETAILPRICE	FLOAT,
		P_COMMENT		VARCHAR(23));


CREATE TABLE customer (
		C_CUSTKEY		INT(4),
		C_NAME			VARCHAR(25),
		C_ADDRESS		VARCHAR(40),
		C_NATIONKEY		INT(4) NOT NULL, 
		C_PHONE			VARCHAR(15),
		C_ACCTBAL		FLOAT,
		C_MKTSEGMENT	VARCHAR(10),
		C_COMMENT		VARCHAR(117)
	);



CREATE TABLE supplier (
		S_SUPPKEY		INT(4),
		S_NAME			VARCHAR(25),
		S_ADDRESS		VARCHAR(40),
		S_NATIONKEY		INT(4) NOT NULL, 
		S_PHONE			VARCHAR(15),
		S_ACCTBAL		FLOAT,
		S_COMMENT		VARCHAR(101)
	);

create table orders (
	O_ORDERKEY		INT(4),
	O_CUSTKEY		INT(4) NOT NULL,
	O_ORDERSTATUS	VARCHAR(1),
	O_TOTALPRICE	FLOAT,
	O_ORDERDATE		VARCHAR(10),
	O_ORDERPRIORITY	VARCHAR(15),
	O_CLERK			VARCHAR(15),
	O_SHIPPRIORITY	INT(4),
	O_COMMENT		VARCHAR(79)
);

create table partsupp (
	PS_PARTKEY		INT(4) NOT NULL, 
	PS_SUPPKEY		INT(4) NOT NULL,
	PS_AVAILQTY		INT(4),
	PS_SUPPLYCOST	FLOAT,
	PS_COMMENT		VARCHAR(199)
);

create table lineitem (
	L_ORDERKEY		INT(4) NOT NULL, 
	L_PARTKEY		INT(4) NOT NULL,
	L_SUPPKEY		INT(4) NOT NULL,
	L_LINENUMBER	INT(4),
	L_QUANTITY		FLOAT,
	L_EXTENDEDPRICE	FLOAT,
	L_DISCOUNT		FLOAT,
	L_TAX			FLOAT,
	L_RETURNFLAG	VARCHAR(1),
	L_LINESTATUS	VARCHAR(1),
	L_SHIPDATE		VARCHAR(10),
	L_COMMITDATE	VARCHAR(10),
	L_RECEIPTDATE	VARCHAR(10),
	L_SHIPINSTRUCT	VARCHAR(25),
	L_SHIPMODE		VARCHAR(10),
	L_COMMENT		VARCHAR(44)
);


alter table part add CONSTRAINT pk primary key (P_PARTKEY);
alter table region add CONSTRAINT pk primary key (R_REGIONKEY);
alter table nation add CONSTRAINT pk primary key (N_NATIONKEY);
alter table supplier add CONSTRAINT pk primary key (S_SUPPKEY);
alter table customer add CONSTRAINT pk primary key (C_CUSTKEY);

alter table supplier add CONSTRAINT fk FOREIGN KEY (S_NATIONKEY) REFERENCES nation (N_NATIONKEY);
alter table customer add CONSTRAINT fk FOREIGN KEY (C_NATIONKEY) REFERENCES nation (N_NATIONKEY);
alter table nation add CONSTRAINT fk FOREIGN KEY (N_REGIONKEY) REFERENCES region (R_REGIONKEY);


SELECT C_NAME, O_ORDERSTATUS, N_NATIONKEY FROM customer,orders,nationÂ  WHERE C_CUSTKEY=O_CUSTKEY AND C_NATIONKEY=N_NATIONKEY and N_NAME='CHINA';



CREATE TABLE nationBack(
	n_nationkey INT(4) NOT NULL,
	n_name VARCHAR(25) NOT NULL,
	n_regionkey INT(4) NOT NULL,
	n_comment VARCHAR(152)
	);"
